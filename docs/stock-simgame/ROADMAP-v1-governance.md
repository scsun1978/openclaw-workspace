# ROADMAP v1（治理与推进机制）

- 项目：T-STOCK-SIMGAME-ROADMAP-004
- 版本：v1.0
- 日期：2026-02-18
- 基线输入：
  - Code：`ROADMAP.md`（12 周技术拆解）
  - QA：`QA-EXECUTION-PLAN-STOCK-SIMGAME.md`（质量闸门/环境矩阵）
  - Docs：`DOCS-ROADMAP.md`（文档节奏/发布流程）

---

## 1) W1~W12 每周 Review 节奏（可执行）

## 固定周节奏（每周）

- **周一（Plan Review）**
  - 目标：确认本周范围、风险、依赖、冻结变更窗口
  - 产出：周计划卡（Code/QA/Docs 三线拆分）
- **周三（Mid-week Health Check）**
  - 目标：检查偏差、阻塞、质量信号
  - 产出：偏差清单 + 调整动作
- **周五（Gate Review）**
  - 目标：按周闸门判定 PASS/CONDITIONAL/BLOCK
  - 产出：周结论、下周入口条件

## W1~W12 闸门重点

- **W1-W2（架构与最小可运行骨架）**
  - Gate：核心链路可运行（交易主流程 + 基础日志）
- **W3-W4（核心功能扩展）**
  - Gate：订单/持仓/鉴权完整联通，P0 缺陷清零
- **W5-W6（稳定性与一致性）**
  - Gate：WS 降级、双轨一致性、seed 可复现通过
- **W7-W8（质量强化）**
  - Gate：回归覆盖达标，缺陷密度下降趋势明确
- **W9-W10（预发与发布准备）**
  - Gate：预发演练通过，变更失败率受控
- **W11-W12（发布与收口）**
  - Gate：生产发布准入满足，发布后复盘闭环

---

## 2) 风险看板机制（识别/追踪/升级）

## 风险分级

- **R1/P0（红）**：阻断发布或核心功能失效
- **R2/P1（黄）**：影响里程碑但可绕行
- **R3/P2（蓝）**：优化项，不阻断主线

## 风险卡字段（统一模板）

- 风险ID
- 描述
- 触发条件
- 当前等级（R1/R2/R3）
- Owner（Code/QA/Docs/Monitor）
- 缓解措施
- ETA
- 状态（Open/Mitigating/Closed）

## 风险例表（首版）

1. WS 重连一致性漂移（R1）
2. 双轨数据不可复现（R1）
3. 文档与实现版本错配（R2）
4. 测试环境不可用导致验证延期（R2）

---

## 3) 度量指标（核心 KPI）

## 指标定义

- **交付率（Delivery Rate）**
  - 公式：当周完成项 / 当周承诺项
  - 目标：>= 85%

- **缺陷密度（Defect Density）**
  - 公式：缺陷数 / 每千行代码（或每功能点）
  - 目标：连续 3 周下降

- **MTTR（平均修复时长）**
  - 公式：缺陷关闭总时长 / 关闭缺陷数
  - 目标：P0 < 24h，P1 < 72h

- **变更失败率（Change Failure Rate）**
  - 公式：引发回滚/热修的发布次数 / 总发布次数
  - 目标：< 15%

## 采集节奏

- 周三：中期快照
- 周五：周结快照（用于 Gate）
- 月末：趋势复盘

---

## 4) 阻塞升级路径（什么时候升级/升级给谁）

## 升级触发规则

- **P0 阻塞 > 30 分钟**：立即升级
- **P1 阻塞 > 4 小时**：升级
- **同类问题重复 2 次**：升级为系统性问题

## 升级链路

1. **L1（执行层）**：Agent Owner（Code/QA/Docs）
2. **L2（协调层）**：Monitor（裁决优先级、资源重排）
3. **L3（决策层）**：项目 Owner（sc sun）

## 升级动作

- 触发 Red Alert
- 冻结非关键变更
- 启动专项修复窗口
- 形成事故复盘条目（含预防措施）

---

## 5) 综合收口（最终 ROADMAP v1 执行规则）

## 执行原则

1. 先质量后速度：Gate 不通过，不推进下一周
2. 单一真相源：以 team-tasks + 周 Gate 结论为准
3. 证据优先：所有结论需附 commit / 测试输出 / 文档路径

## 周输出最低要求

- Code：本周提交列表 + 关键验证输出
- QA：缺陷与回归报告 + Gate 建议
- Docs：文档更新列表 + 用户可见变更说明
- Monitor：GREEN/YELLOW/RED 周结论 + 下一周准入条件

## 里程碑退出条件（W12）

- 连续 2 周无 P0 未关闭
- 关键链路回归通过率 >= 95%
- 发布后 72h 无高优先级事故

---

## 综合建议（Monitor）

- 当前建议采用 **“周三纠偏 + 周五闸门”** 的双闸治理。
- 对 `WS一致性 / 双轨可复现 / 发布文档一致性` 三项设为永久高优先级看板。
- 若任一周出现 `P0 > 0`，下一周默认进入“质量修复周”，暂停新增功能承诺。
